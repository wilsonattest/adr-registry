<article class="adr-detail" data-pagefind-body>
    <span data-pagefind-filter="status:{{ adr.status }}"></span>
    <span data-pagefind-filter="repo:{{ adr.repository_name }}"></span>
    <span data-pagefind-meta="status:{{ adr.status }}"></span>
    <span data-pagefind-meta="repo:{{ adr.repository_name }}"></span>

    <nav class="breadcrumb">
        <a href="{{ base_url }}/">Home</a> /
        <a href="{{ base_url }}/repos/{{ adr.repository_name }}.html">{{ adr.repository_name }}</a> /
        <span>ADR-{{ adr.number }}</span>
    </nav>

    <header class="adr-detail-header">
        <div class="adr-detail-meta">
            <span class="badge badge-{{ adr.status | string.downcase }}">{{ adr.status }}</span>
            {{ if adr.date }}
            <span class="adr-date">{{ adr.date | date.to_string '%Y-%m-%d' }}</span>
            {{ end }}
        </div>
        <h1>{{ adr.title }}</h1>
        <div class="adr-actions">
            <a href="{{ adr.github_url }}" class="btn btn-secondary" target="_blank" rel="noopener">
                View on GitHub
            </a>
        </div>
    </header>

    <div class="adr-detail-body">
        <div class="adr-content">
            {{ adr.html_content }}
        </div>

        <aside class="adr-sidebar">
            <h3>Metadata</h3>
            <dl>
                <dt>Number</dt>
                <dd>ADR-{{ adr.number }}</dd>

                <dt>Status</dt>
                <dd><span class="badge badge-{{ adr.status | string.downcase }}">{{ adr.status }}</span></dd>

                {{ if adr.date }}
                <dt>Date</dt>
                <dd>{{ adr.date | date.to_string '%Y-%m-%d' }}</dd>
                {{ end }}

                {{ if adr.deciders.size > 0 }}
                <dt>Deciders</dt>
                <dd>
                    {{ for decider in adr.deciders }}
                    <span class="decider">{{ decider }}</span>{{ if !for.last }}, {{ end }}
                    {{ end }}
                </dd>
                {{ end }}

                <dt>Repository</dt>
                <dd><a href="{{ base_url }}/repos/{{ adr.repository_name }}.html">{{ adr.repository_name }}</a></dd>

                {{ if adr.supersedes_id }}
                <dt>Supersedes</dt>
                <dd><a href="{{ base_url }}/adr/{{ adr.supersedes_id }}.html">{{ adr.supersedes_id }}</a></dd>
                {{ end }}

                {{ if adr.superseded_by_id }}
                <dt>Superseded By</dt>
                <dd><a href="{{ base_url }}/adr/{{ adr.superseded_by_id }}.html">{{ adr.superseded_by_id }}</a></dd>
                {{ end }}
            </dl>
        </aside>
    </div>
</article>
